[
  {
    "type": "CREATE",
    "name": "users",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(64)",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "mailing_list",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "UNIQUE": true
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_tokens",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "token",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(12)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "exams",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "audio_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "video_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "products",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "enabled",
        "columnType": "BOOLEAN",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": false
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "brand",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "img_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "options_power",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_bc",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_diameter",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_cyl",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_axis",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_ot",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "price_retail",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_wholesale",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "aab_code",
        "columnType": "VARCHAR(12)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": ""
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_days_per_lens",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_lenses",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "scripts",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "product_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_power",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_bc",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_diameter",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_cyl",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_axis",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_ot",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_power",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_bc",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_diameter",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_cyl",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_axis",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_ot",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "product_id",
        "foreignTable": "products",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_bin"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "sessions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "session_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "COLLATE": "utf8_bin"
          },
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "expires",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "TEXT",
        "attrs": [
          {
            "COLLATE": "utf8_bin"
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "session_id"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "versions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "to_version",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "from_version",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_migrated",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "parent_products",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "enabled",
        "columnType": "BOOLEAN",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": false
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "brand",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "img_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "options_power",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_bc",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_diameter",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_cyl",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_axis",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "options_ot",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_days_per_lens",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "additional_search_keywords",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "name"
      },
      {
        "type": "DROP",
        "column": "brand"
      },
      {
        "type": "DROP",
        "column": "img_url"
      },
      {
        "type": "DROP",
        "column": "options_power"
      },
      {
        "type": "DROP",
        "column": "options_bc"
      },
      {
        "type": "DROP",
        "column": "options_diameter"
      },
      {
        "type": "DROP",
        "column": "options_cyl"
      },
      {
        "type": "DROP",
        "column": "options_axis"
      },
      {
        "type": "DROP",
        "column": "options_ot"
      },
      {
        "type": "DROP",
        "column": "description"
      },
      {
        "type": "DROP",
        "column": "num_days_per_lens"
      },
      {
        "type": "ADD",
        "column": "parent_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_parent_product_id",
        "localColumn": "parent_product_id",
        "foreignTable": "products",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "payment_tokens",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "enabled",
        "columnType": "BOOLEAN",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": false
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "stripe_card_id",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "brand",
        "columnType": "CHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "last4",
        "columnType": "CHAR(4)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "exp_month",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "exp_year",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "stripe_customer_id",
        "columnType": "VARCHAR(128)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "telephone",
        "columnType": "VARCHAR(16)",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "addresses",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "street_line_1",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "street_line_2",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "city",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "postal_code",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "orders",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "quantity",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "script_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "shipping_address",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "script_id",
        "foreignTable": "scripts",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "auto_renewals",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "script_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "renew_every_n_days",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "script_id",
        "foreignTable": "scripts",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "quantity"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "label",
        "after": "label",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "options",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_lenses",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "duration",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "scripts_ibfk_2"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "product_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "parent_product_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "mds",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "UNIQUE": true
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "labels",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "color",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "orders_labels_xref",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "label_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "label_id",
        "foreignTable": "labels",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "exams_ibfk_1"
      },
      {
        "type": "DROP",
        "column": "audio_url"
      },
      {
        "type": "DROP",
        "column": "user_id"
      },
      {
        "type": "ADD",
        "column": "visual_acuity_video_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "letters",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "notes",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "md_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "script_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "passed",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "md_id",
        "foreignTable": "mds",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "script_id",
        "foreignTable": "scripts",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "md_id",
        "after": "md_id",
        "columnType": "INT",
        "attrs": [
          "null"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "letters",
        "after": "letters",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_archived",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_order_confirm_sent",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_shipping_confirm_sent",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "uploaded_videos",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "video_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "letters",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "abb_order_no",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "notes",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "letters",
        "after": "letters",
        "columnType": "VARCHAR(256)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "type",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "run_out_date",
        "columnType": "DATE",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "auth_tokens",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "guid",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "valid",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_seen_onboarding",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_qualified",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "abb_product_catalog",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "parent_product_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "man_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "man_name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_addition",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_axis",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_checkdigit",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_color",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_color_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_convert",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_cylinder",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_description",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL",
          {
            "UNIQUE": true
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_power",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prd_upc_code",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prf_basecurve",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prf_convert",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prf_diameter",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prf_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "prf_rev_diag_ind",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "ser_day_per_lens",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "ser_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "ser_name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "ser_wear_freq",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sty_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unt_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unt_lens_qtty",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unt_name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unt_pack_qtty",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unt_patient_visible",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_retail",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_wholesale",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "INDEX",
        "name": "ser_name",
        "column": "ser_name"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "user_id",
        "columnType": "INT",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "qualify_state",
        "columnType": "VARCHAR(2)",
        "attrs": []
      },
      {
        "type": "ADD",
        "column": "qualify_run_out_date",
        "columnType": "DATE",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "has_qualified",
        "after": "has_seen_qualification",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "enabled",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "source",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "enabled"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "price_wholesale"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "price_retail"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "referral",
        "columnType": "VARCHAR(2048)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "qualify_run_out_date",
        "after": "qualify_last_exam_date",
        "columnType": "DATE",
        "attrs": []
      },
      {
        "type": "ADD",
        "column": "qualify_birthday",
        "columnType": "DATE",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "last_exam_date",
        "columnType": "DATE",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_auto_renew",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "tracking_number",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "tracking_number_url",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_staff",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "env",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": "prod"
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_logs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "subject",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "device",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP DEFAULT",
        "tableName": "date_created"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_user_id",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "virtual_supplies",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sku",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "parent_product_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_boxes",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "data",
        "after": "data",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "device",
        "after": "device",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "fk_user_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "use_supply_overrides",
        "columnType": "TINYINT(1)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "name",
        "after": "opt_duration",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "price",
        "after": "price_retail",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "num_lenses",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "affiliate_id",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "affiliate_id"
        ],
        "name": "constr_affiliate_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "INDEX",
        "name": null,
        "column": "date_created"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "sku",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "admins",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "UNIQUE": true
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "letters",
        "after": "letters",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "user_logs_user_id_subject_idx",
    "tableName": "user_logs",
    "columns": [
      "user_id",
      "subject"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "sandbox",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "order_logs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT(11)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "subject",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "order_logs_order_id_subject_idx",
    "tableName": "order_logs",
    "columns": [
      "order_id",
      "subject"
    ],
    "unique": null
  },
  {
    "type": "CREATE",
    "name": "exam_logs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "exam_id",
        "columnType": "INT(11)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "subject",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "exam_logs_exam_id_subject_idx",
    "tableName": "exam_logs",
    "columns": [
      "exam_id",
      "subject"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "redness_test_video_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "visual_acuity_test_video_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_visual_acuity_test_video_id",
        "localColumn": "visual_acuity_test_video_id",
        "foreignTable": "uploaded_videos",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_redness_test_video_id",
        "localColumn": "redness_test_video_id",
        "foreignTable": "uploaded_videos",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "video_url",
        "after": "video_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "CHANGE",
        "before": "visual_acuity_video_url",
        "after": "visual_acuity_video_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "CHANGE",
        "before": "letters",
        "after": "letters",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_rx_expires",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "status",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "exams_ibfk_3"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "script_id",
        "after": "script_id",
        "columnType": "INT(11)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "exams_ibfk_3",
        "localColumn": "script_id",
        "foreignTable": "scripts",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "video_url"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "visual_acuity_video_url"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "letters"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "user_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "exams_users_fk",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "status",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "invalid_reason",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "tags",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "features",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "md_licenses",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "pcs",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "pc_addresses",
    "ifExists": true
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "signature_url",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "telephone",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "md_licenses",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "md_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "license",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "md_id",
        "foreignTable": "mds",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "pc_addresses",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "street",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "city",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "postal_code",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "pcs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "pc_address_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "pc_address_id",
        "foreignTable": "pc_addresses",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "options_distance",
        "columnType": "VARCHAR(2048)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "options_add_power",
        "columnType": "VARCHAR(2048)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "options_color",
        "columnType": "VARCHAR(2048)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "options",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "cart",
    "ifExists": true
  },
  {
    "type": "CREATE",
    "name": "cart",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_parent_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_option",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_parent_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_option",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "auto_renew",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "left_parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "right_parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_qualified",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_q1",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_q2",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_q3",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_signed_waiver",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "order_no",
        "columnType": "VARCHAR(10)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_parent_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_parent_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_left_parent_product_id",
        "localColumn": "left_parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_right_parent_product_id",
        "localColumn": "right_parent_product_id",
        "foreignTable": "parent_products",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "exam_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_exam_id",
        "localColumn": "exam_id",
        "foreignTable": "exams",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "user_id",
          "label"
        ],
        "name": "constr_addresses_user_id_label"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "user_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "subtotal",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "sales_tax",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "exam_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "discount_amt",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "total",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_user_id",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "orders_ibfk_1"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_qty_option",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "right_qty_option",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "exams_ibfk_3"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "script_id",
        "after": "script_id",
        "columnType": "INT(11)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "script_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "script_id"
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "scripts",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "referral_id",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "auto_renewals",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "exam_videos",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "order_logs",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "auto_renewals",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "sessions",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "user_icloud_tokens",
    "ifExists": true
  },
  {
    "type": "DROP TABLE",
    "tableName": "options",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_auto_renew",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_device_ad_ids",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "BINARY(16)",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_last_seen",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(7)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "id",
        "columnType": "BINARY(16)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP PRIMARY KEY"
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "guid"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "referral_url",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "sms",
    "ifExists": true
  },
  {
    "type": "CREATE",
    "name": "sms",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sent_from",
        "columnType": "VARCHAR(12)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sent_to",
        "columnType": "VARCHAR(12)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "body",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "direction",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "sms",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "messages",
    "ifExists": true
  },
  {
    "type": "CREATE",
    "name": "messages",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sms_from",
        "columnType": "VARCHAR(12)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sms_to",
        "columnType": "VARCHAR(12)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "email_from",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "email_to",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "message",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "direction",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "attachments",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "subject",
        "after": "subject",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "referral_url"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "attachments",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "status",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "cancel_reason",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "status",
        "after": "status",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NULL",
          {
            "DEFAULT": "OPEN"
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "audit_log",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "subject",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_shortened_rx",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "stripe_charge_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "shipping_address",
        "after": "shipping_address",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "referral",
        "after": "referral",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "national_lens_product_catalog",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "comp_id",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "bc",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "dia",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "color",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "power",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "axis",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "cyl",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sample",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "upc",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "productsv2",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "additional_search_keywords",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "brand",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_enabled",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0"
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "img_url",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_days_per_lens",
        "columnType": "SMALLINT(5)",
        "attrs": [
          "unsigned",
          {
            "DEFAULT": "0"
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_lenses",
        "columnType": "SMALLINT(5)",
        "attrs": [
          "unsigned",
          {
            "DEFAULT": "0"
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_retail",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": "0.00"
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "options",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_qty",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_qty",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "v2_left_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "v2_right_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "v2_left_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "v2_right_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "license",
        "after": "license_no",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "_parent_product_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_qty",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "left_qty",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "virtual_supplies",
    "ifExists": false
  },
  {
    "type": "RENAME TABLE",
    "existingName": "abb_product_catalog",
    "newName": "catalog_abb"
  },
  {
    "type": "RENAME TABLE",
    "existingName": "national_lens_product_catalog",
    "newName": "catalog_national_lens"
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "labels",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "orders_labels_xref",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "labels",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "_parent_product_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "fk_right_parent_product_id"
      },
      {
        "type": "DROP FOREIGN KEY",
        "name": "fk_left_parent_product_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "right_parent_product_id"
      },
      {
        "type": "DROP",
        "column": "left_parent_product_id"
      },
      {
        "type": "DROP INDEX",
        "name": "fk_right_parent_product_id"
      },
      {
        "type": "DROP INDEX",
        "name": "fk_left_parent_product_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "catalog_abb_ibfk_1"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "parent_product_id"
      },
      {
        "type": "DROP INDEX",
        "name": "parent_product_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "cart_ibfk_3"
      },
      {
        "type": "DROP FOREIGN KEY",
        "name": "cart_ibfk_2"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "right_parent_product_id"
      },
      {
        "type": "DROP",
        "column": "left_parent_product_id"
      },
      {
        "type": "DROP INDEX",
        "name": "right_parent_product_id"
      },
      {
        "type": "DROP INDEX",
        "name": "left_parent_product_id"
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "parent_products",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "products",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "_parent_product_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "customer_service_grade",
        "columnType": "VARCHAR(1)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "distributor",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "wholesale_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "distributor_shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "abb_order_no",
        "after": "distributor_order_no",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_status_modified",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_status_modified",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "mobile_number",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "slack_username",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "rebates",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "product_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_boxes",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "amt_discount",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_admin",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "mail_in_rebate_amt",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "RENAME TABLE",
    "existingName": "catalog_national_lens",
    "newName": "catalog_ntl_lens"
  },
  {
    "type": "CREATE",
    "name": "product_skus",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "product_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "power",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "bc",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "dia",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "color",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "axis",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "cyl",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "dn",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "add_power",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "distributors",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "distributor_skus",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "distributor_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "ntl_lens_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "product_sku_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "unit_lens_qty",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "distributor_id",
        "foreignTable": "distributors",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "product_sku_id",
        "foreignTable": "product_skus",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "ntl_lens_id",
        "foreignTable": "catalog_ntl_lens",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "distributor_shipping_methods",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "distributor_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "shipping_code",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "distributor_id",
        "foreignTable": "distributors",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_rebate_sent",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_rebate_returned",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_rebate_mailed",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_rebate_cashed",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_acknowledged",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_attribution_adjust",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "idfa",
        "columnType": "BINARY(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "android_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "store",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "network_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "campaign_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "adgroup_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "creative_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "impression_based",
        "columnType": "TINYINT(0)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_organic",
        "columnType": "TINYINT(0)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "gclid",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "click_time",
        "columnType": "DATETIME",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "installed_at",
        "columnType": "DATETIME",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "device_type",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_campaign_group_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_campaign_group_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_campaign_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_campaign_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_adgroup_name",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "fb_adgroup_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "twitter_line_item_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "ip_address",
        "columnType": "VARBINARY(16)",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "sms_from",
        "after": "sms_from",
        "columnType": "VARCHAR(32)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "sms_to",
        "after": "sms_to",
        "columnType": "VARCHAR(32)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "raw_message",
        "columnType": "TEXT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_escalated",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_md_reviewed",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_retake_permitted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "retake_instructions",
        "columnType": "TEXT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_closed",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "labels",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "notes",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "brand_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "brands",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "slug",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_brands_id",
        "localColumn": "brand_id",
        "foreignTable": "brands",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "roles",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "profile_image",
        "columnType": "VARCHAR(200)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "admin_id_fk01",
        "localColumn": "admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "admin_id_fk02",
        "localColumn": "admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "signature_url",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "mobile_number",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "slack_username",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_suspended",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "profile_image"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "is_suspended",
        "after": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "wallet_transactions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(32)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "amt",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "pct",
        "columnType": "TINYINT(3)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "expires_at",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "metadata",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "wallet_user_id_idx",
    "tableName": "wallet_transactions",
    "columns": [
      "user_id"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "wallet_order_id_idx",
    "tableName": "wallet_transactions",
    "columns": [
      "order_id"
    ],
    "unique": null
  },
  {
    "type": "CREATE",
    "name": "reward_rules",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(32)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "branch_id",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "reward_for",
        "columnType": "VARCHAR(12)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "amt",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "pct",
        "columnType": "TINYINT(3)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "max_uses",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "must_trigger_event",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "expires_at",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "reward_rules_branch_id_idx",
    "tableName": "reward_rules",
    "columns": [
      "branch_id"
    ],
    "unique": " UNIQUE"
  },
  {
    "type": "CREATE",
    "name": "deeplinks",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "url",
        "columnType": "VARCHAR(160)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "created_by_user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "reward_rule_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_single_use",
        "columnType": "TINYINT(0)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "expires_at",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "created_by_user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "reward_rule_id",
        "foreignTable": "reward_rules",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "deeplinks_url_idx",
    "tableName": "deeplinks",
    "columns": [
      "url"
    ],
    "unique": null
  },
  {
    "type": "CREATE",
    "name": "deeplink_hits",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "deeplink_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "deeplink_id",
        "foreignTable": "deeplinks",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "deeplinks_hits_user_id_idx",
    "tableName": "deeplink_hits",
    "columns": [
      "user_id"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "branch_identity_id",
        "columnType": "VARCHAR(32)",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "refer_a_friend",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "referree_user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "referree_wallet_transaction_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "referrer_user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "referrer_wallet_transaction_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "url",
        "columnType": "VARCHAR(160)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "referree_user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "referrer_user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "referree_wallet_transaction_id",
        "foreignTable": "wallet_transactions",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "referrer_wallet_transaction_id",
        "foreignTable": "wallet_transactions",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "refer_a_friend_referree_user_id_idx",
    "tableName": "refer_a_friend",
    "columns": [
      "referree_user_id"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "refer_a_friend_referrer_user_id_idx",
    "tableName": "refer_a_friend",
    "columns": [
      "referrer_user_id"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "data",
        "after": "data",
        "columnType": "JSON",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "subject",
        "after": "subject",
        "columnType": "VARCHAR(600)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "admin_id_fk03",
        "localColumn": "admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "admin_id",
        "after": "md_admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "admin_id",
        "after": "md_admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "device_display_properties",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "device_name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "operating_system",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "diagonal_inches",
        "columnType": "DECIMAL(3, 1)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "pixel_width",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "pixel_height",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "aspect_width",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "aspect_height",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "device_width",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "pixels_per_inch",
        "columnType": "SMALLINT",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "email",
        "after": "email",
        "columnType": "VARCHAR(254)",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "v2_messages",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "admin_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "thread_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_sent",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "min_send_date",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "sms_to",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "sms_from",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "email_to",
        "columnType": "VARCHAR(254)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "email_from",
        "columnType": "VARCHAR(254)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "optimal_send_time_threshold",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "attachments",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "content",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "raw_content",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "direction",
        "columnType": "VARCHAR(32)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "is_acknowledged",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "v2_messages_user_id_date_sent_idx",
    "tableName": "v2_messages",
    "columns": [
      "user_id",
      "date_sent"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_promotional",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "ADD",
        "column": "reward_rule_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "reward_rule_id",
        "foreignTable": "reward_rules",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "DROP INDEX",
    "name": "deeplinks_url_idx",
    "tableName": "deeplinks"
  },
  {
    "type": "CREATEINDEX",
    "name": "deeplinks_url_idx",
    "tableName": "deeplinks",
    "columns": [
      "url"
    ],
    "unique": " UNIQUE"
  },
  {
    "type": "CREATE",
    "name": "do_not_disturb",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_expiry",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "channels",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "drip_type",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "drip_schedule",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "channels",
        "columnType": "JSON",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "send_interval",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "replacement_schedule",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "drip_messages",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "description",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "sendwithus_template_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "content",
        "columnType": "TEXT",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "drip_schedule_messages_xref",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "drip_schedule_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "drip_message_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "drip_schedule_id",
        "foreignTable": "drip_schedule",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "drip_message_id",
        "foreignTable": "drip_messages",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "drip_reorder_options",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_qty",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_qty",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "left_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "right_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "drip_schedule_messages_xref_idx",
    "tableName": "drip_schedule_messages_xref",
    "columns": [
      "drip_schedule_id",
      "drip_message_id"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "dnd_user_id_date_expiry_idx",
    "tableName": "do_not_disturb",
    "columns": [
      "user_id",
      "date_expiry"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "drip_reorder_options_user_id_idx",
    "tableName": "drip_reorder_options",
    "columns": [
      "user_id"
    ],
    "unique": null
  },
  {
    "type": "CREATE",
    "name": "notes",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "admin_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "exam_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "text",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "BOOLEAN",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": false
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "exam_id",
        "foreignTable": "exams",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "materials",
        "columnType": "TEXT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "package_details",
        "columnType": "TEXT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "sendwithus_template_id",
        "columnType": "VARCHAR(64)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "lens_type",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "package_detail",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "material",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "product_competitors",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "product_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY"
        ]
      },
      {
        "type": "COLUMN",
        "name": "lens_com_url",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "lens_com_selector",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "lens_com_price",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "lens_com_last_crawled",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "c1800_url",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "c1800_price",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "c1800_last_crawled",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "visiondirect_url",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "visiondirect_price",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "visiondirect_last_crawled",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "rx_images",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "_parent_product_id"
      },
      {
        "type": "DROP",
        "column": "brand"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "right_option"
      },
      {
        "type": "DROP",
        "column": "left_option"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "right_qty_option"
      },
      {
        "type": "DROP",
        "column": "left_qty_option"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "has_qualified"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "user_id"
        ],
        "name": "constr_drip_reorder_options_user_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_rx_email_sent",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "detect_sessions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "uploaded_video_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "mean_distance",
        "columnType": "FLOAT(4, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "min_distance",
        "columnType": "FLOAT(4, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "max_distance",
        "columnType": "FLOAT(4, 2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "correct_distance_percent",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "COLUMN",
        "name": "request_count",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "COLUMN",
        "name": "undetected_count",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "COLUMN",
        "name": "error_count",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "COLUMN",
        "name": "max_faces",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "uploaded_video_id"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "uploaded_video_id",
        "foreignTable": "uploaded_videos",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "camera_metadata",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "package_detail"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "material"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "lens_type",
        "after": "lens_type",
        "columnType": "TEXT",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "drip_schedule_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "messages_drip_schedule_fk",
        "localColumn": "drip_schedule_id",
        "foreignTable": "drip_schedule",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "send_error",
        "columnType": "TEXT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "replacement_schedule",
          "send_interval",
          "type"
        ],
        "name": "replacement_schedule_send_interval_type_unique"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_auth_passwords",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "PRIMARY KEY",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "password_hash",
        "columnType": "BINARY(60)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_auth_password_reset_tokens",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_expires",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "token",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_used",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "user_auth_password_reset_tokens_token_idx",
    "tableName": "user_auth_password_reset_tokens",
    "columns": [
      "token"
    ],
    "unique": " UNIQUE"
  },
  {
    "type": "CREATE",
    "name": "shipping_options",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "TINYINT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(64)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "cost",
        "columnType": "DECIMAL(5, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "shipping_option_id",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "shipping_option_id",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "shipping_option_id",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "request_count",
        "after": "request_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "CHANGE",
        "before": "undetected_count",
        "after": "undetected_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "CHANGE",
        "before": "error_count",
        "after": "error_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_of_birth",
        "columnType": "DATE",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "subscriptions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "PRIMARY KEY",
          "NOT NULL",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(200)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(200)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "platform_id",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "platform_id",
        "columnType": "TINYINT",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "product_line",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "category",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "advertising_attribution",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "source",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "campaign",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "adgroup",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "keyword",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "creative",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "advertising_attribution_user_id_idx",
    "tableName": "advertising_attribution",
    "columns": [
      "user_id"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "preferred_address_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "preferred_address_id_fk01",
        "localColumn": "preferred_address_id",
        "foreignTable": "addresses",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "reorder_options",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "exam_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_qty",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "preferred_address_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "preferred_shipping_option_id",
        "columnType": "TINYINT(4)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_product_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_qty",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "user_id"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "exam_id",
        "foreignTable": "exams",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "left_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "right_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "preferred_address_id",
        "foreignTable": "addresses",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "preferred_shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "type",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "order_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "exam_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "order_id_fk01",
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "exam_id_fk01",
        "localColumn": "exam_id",
        "foreignTable": "exams",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_photo_rx",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "user_address_id",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_seen_rx_upload",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "preferred_address_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "preferred_address_id",
        "foreignTable": "addresses",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "addresses_ibfk_1"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP INDEX",
        "name": "constr_addresses_user_id_label"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "user_id",
          "user_address_id"
        ],
        "name": "addresses_user_id_user_address_id_idx"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_fulfilled",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "network_name",
        "after": "network_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "campaign_name",
        "after": "campaign_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "adgroup_name",
        "after": "adgroup_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "creative_name",
        "after": "creative_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "available_distributor_ids",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "has_seen_rx_upload"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_first_ready_for_dr",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_first_md_reviewed",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "diagnosis",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE TABLE LIKE",
    "newTable": "lenses",
    "exisitingTable": "productsv2"
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "abbreviation",
        "columnType": "VARCHAR(8)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0.00"
          }
        ]
      },
      {
        "type": "ADD",
        "column": "pickup_time",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "add_cost_per_gram",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0.00"
          }
        ]
      },
      {
        "type": "ADD",
        "column": "max_grams",
        "columnType": "INT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "lens_variations",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          {
            "UNIQUE": true
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "power",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "bc",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "dia",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "color",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "axis",
        "columnType": "VARCHAR(8)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "cyl",
        "columnType": "VARCHAR(8)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "add_power",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "dn",
        "columnType": "VARCHAR(1)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "num_lenses",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "shipping_weight_grams",
        "columnType": "INT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "lens_to_variation",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "lens_variation_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "lens_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "multiplier",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "lens_variation_upc",
          "lens_id"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "lens_variation_upc",
        "foreignTable": "lens_variations",
        "foreignColumn": "upc"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "lens_id",
        "foreignTable": "lenses",
        "foreignColumn": "id"
      },
      {
        "type": "INDEX",
        "name": "idx_lens_id",
        "columns": [
          "lens_id"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "distributor_lens_stock",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "lens_variation_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "distributor_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0.00"
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_available",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_dx",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "brand_name",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "product_name",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "distributor_id",
          "lens_variation_upc"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "distributor_id",
        "foreignTable": "distributors",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "lens_variation_upc",
        "foreignTable": "lens_variations",
        "foreignColumn": "upc"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_lens_distributor_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "left_lens_distributor_id",
        "foreignTable": "distributors",
        "foreignColumn": "id"
      },
      {
        "type": "ADD",
        "column": "right_lens_distributor_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "right_lens_distributor_id",
        "foreignTable": "distributors",
        "foreignColumn": "id"
      },
      {
        "type": "ADD",
        "column": "left_lens_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "left_lens_upc",
        "foreignTable": "lens_variations",
        "foreignColumn": "upc"
      },
      {
        "type": "ADD",
        "column": "right_lens_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "right_lens_upc",
        "foreignTable": "lens_variations",
        "foreignColumn": "upc"
      },
      {
        "type": "ADD",
        "column": "left_lens_distributor_qty",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "right_lens_distributor_qty",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "state",
        "after": "qualify_state",
        "columnType": "VARCHAR(2)",
        "attrs": []
      },
      {
        "type": "CHANGE",
        "before": "last_exam_date",
        "after": "qualify_last_exam_date",
        "columnType": "DATE",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "video_detection_segments",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "segment_id",
        "columnType": "INT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "video_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "segment_timestamp",
        "columnType": "DATETIME(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "segment_length",
        "columnType": "DECIMAL(5, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "error_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "mean_distance",
        "columnType": "DECIMAL(4, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "max_faces",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "COLUMN",
        "name": "glasses_detected",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "video_id",
        "foreignTable": "uploaded_videos",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "exam_costs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "subject_date_created_idx",
    "tableName": "audit_log",
    "columns": [
      "subject",
      "date_created"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "exam_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "request_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "ADD",
        "column": "undetected_count",
        "columnType": "SMALLINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_deleted",
        "columnType": "TINYINT",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_auto_renew_purchase",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_auto_renew_on",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "catalog_abb",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "exam_costs",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "messages",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "distributor_skus",
    "ifExists": false
  },
  {
    "type": "DROP TABLE",
    "tableName": "catalog_ntl_lens",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "exams_ibfk_2"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP KEY",
        "name": "md_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "md_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "md_licenses_ibfk_1"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP KEY",
        "name": "md_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "md_id"
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "mds",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "branch_id",
        "after": "promo_code",
        "columnType": "VARCHAR(64)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "mean_distance",
        "after": "mean_distance",
        "columnType": "DECIMAL(4, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "is_auto_renew"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "auto_renew"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "dx_shipping_option_id",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "dx_shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_dx",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q1",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q2",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q3",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q4",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q5",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "has_answered_dx_q6",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_dx",
        "columnType": "TINYINT",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_dx",
        "columnType": "TINYINT(0)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "dx_shipping_cost",
        "columnType": "DECIMAL(5, 2)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "dx_shipping_option_id",
        "columnType": "TINYINT(0)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "dx_shipping_option_id",
        "foreignTable": "shipping_options",
        "foreignColumn": "id"
      },
      {
        "type": "ADD",
        "column": "dx_tracking_number",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "dx_tracking_number_url",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "is_dx_shipping_confirm_sent",
        "columnType": "TINYINT(0)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "experimental_subscriptions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "stripe_plan_id",
        "columnType": "VARCHAR(32)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_subscription_ends",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "experiment_data",
        "columnType": "JSON",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "experimental_passive_verification",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "left_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "left_qty",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_qty",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "verifying_md_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "verifying_md_city",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "verifying_md_state",
        "columnType": "VARCHAR(2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "verifying_md_telephone",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "experiment_data",
        "columnType": "JSON",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "experimental_brand_switching",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "current_left_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "current_right_product_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "experiment_data",
        "columnType": "JSON",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "distributor_orders",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "status",
        "columnType": "VARCHAR(50)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "error",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "sentry_id",
        "columnType": "VARCHAR(50)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "distributor_order_no",
        "columnType": "VARCHAR(250)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "shipping_option",
        "columnType": "VARCHAR(100)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "tracking",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "order_no",
        "columnType": "VARCHAR(10)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_qty",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_qty",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "distributor",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_lens_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_lens_upc",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "shipping_address",
        "columnType": "JSON",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      },
      {
        "type": "INDEX",
        "name": "status",
        "columns": [
          "status"
        ]
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_lens_distributor_order_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "right_lens_distributor_order_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_left_lens",
        "localColumn": "left_lens_distributor_order_id",
        "foreignTable": "distributor_orders",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_right_lens",
        "localColumn": "right_lens_distributor_order_id",
        "foreignTable": "distributor_orders",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "idfa",
        "after": "idfa",
        "columnType": "VARCHAR(45)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "payment_log",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_auto_charge_enabled",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_passive_verification",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "ADD",
        "column": "pass_verif_optom",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "pass_verif_optom",
        "after": "passive_verification_optom",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "adid",
        "columnType": "VARCHAR(45)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "gps_adid",
        "columnType": "VARCHAR(45)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "RENAME TABLE",
    "existingName": "user_device_ad_ids",
    "newName": "user_device_ad_ids_legacy"
  },
  {
    "type": "CREATE",
    "name": "user_device_ad_ids",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "VARCHAR(45)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(12)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_last_seen",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id",
          "user_id",
          "type"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_backordered",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_cancelled",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": false
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "invoice_no",
        "columnType": "VARCHAR(100)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_answered_ct_q1",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "user_device_ad_ids_legacy",
    "ifExists": false
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_dr_valid_override",
        "columnType": "TINYINT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "email"
        ],
        "name": null
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "dx_left_lens_distributor_order_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "dx_right_lens_distributor_order_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "type",
        "columnType": "VARCHAR(10)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "landing_page_url",
        "columnType": "VARCHAR(255)",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "experiment_overrides",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "path",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "override_choice",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "user_id",
          "path"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "qualify_state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "qualify_last_exam_date",
        "columnType": "DATE",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "lens_type",
        "columnType": "ENUM(daily, weekly, monthly)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "cost"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "shipping_cost"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "left_shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "right_shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "dx_wholesale_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "dx_distributor_shipping_cost",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "user_attribution_surveys",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "answer",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "location",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "device",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "has_skipped",
        "columnType": "BOOLEAN",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "tasks",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(250)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "priority",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_resolved",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_assigned",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "metadata",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "tags",
        "columnType": "JSON",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "case_category",
        "columnType": "VARCHAR(250)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "assigned_admin_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "assigner_admin_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "completed_by_admin_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "status",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "ACTIVE"
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_assigned_admin",
        "localColumn": "assigned_admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_assigner_admin",
        "localColumn": "assigner_admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "tasks_xref",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "association_type",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "task_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "order_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "note_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "message_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "exam_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_task",
        "localColumn": "task_id",
        "foreignTable": "tasks",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_order",
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_note",
        "localColumn": "note_id",
        "foreignTable": "notes",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_message",
        "localColumn": "message_id",
        "foreignTable": "v2_messages",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_exam",
        "localColumn": "exam_id",
        "foreignTable": "exams",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "claimed_by_admin_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_claimed",
        "localColumn": "claimed_by_admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "order_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "type",
        "columnType": "VARCHAR(32)",
        "attrs": [
          {
            "DEFAULT": "MD_NOTE"
          },
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "data",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_sc_notes",
        "localColumn": "order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "last_updated",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "last_updated",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "cloud_storage",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "url",
        "columnType": "VARCHAR(250)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(250)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "data",
        "columnType": "JSON",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "estimated_reorder_date",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "estimated_reorder_date",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "pv_optoms",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "first_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "last_name",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "clinic_name",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "clinic_telephone",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "clinic_street_line_1",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "clinic_street_line_2",
        "columnType": "VARCHAR(256)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "city",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "postal_code",
        "columnType": "VARCHAR(16)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "additional_details",
        "columnType": "JSON",
        "attrs": []
      },
      {
        "type": "INDEX",
        "name": "date_created",
        "columns": [
          "date_created"
        ]
      },
      {
        "type": "INDEX",
        "name": "date_modified",
        "columns": [
          "date_modified"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "first_name"
      },
      {
        "type": "DROP",
        "column": "last_name"
      },
      {
        "type": "ADD",
        "column": "doctor_name",
        "columnType": "VARCHAR(255)",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "lens_options_cache",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "lens_id",
        "columnType": "INT",
        "attrs": [
          "PRIMARY KEY",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "power",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "bc",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "dia",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "color",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "axis",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "cyl",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "add_power",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "dn",
        "columnType": "VARCHAR(2048)",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "user_id",
        "columnType": "INT",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_tasks_user_id",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "subject",
        "columnType": "TEXT",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "message_templates",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(250)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "content",
        "columnType": "TEXT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "NOW()"
            }
          },
          {
            "ONUPDATE": {
              "type": "NOW()"
            }
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "INNODB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "UTF8"
      },
      {
        "key": "COLLATE",
        "value": "UTF8_GENERAL_CI"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "user_attribution_adjust_idfa_idx",
    "tableName": "user_attribution_adjust",
    "columns": [
      "idfa"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "user_attribution_adjust_adid_idx",
    "tableName": "user_attribution_adjust",
    "columns": [
      "adid"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "user_attribution_adjust_gps_adid_idx",
    "tableName": "user_attribution_adjust",
    "columns": [
      "gps_adid"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "user_device_ad_ids_user_id_idx",
    "tableName": "user_device_ad_ids",
    "columns": [
      "user_id"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "ip_addr",
        "columnType": "VARBINARY(16)",
        "attrs": []
      }
    ]
  },
  {
    "type": "RENAME TABLE",
    "existingName": "pv_optoms",
    "newName": "optoms"
  },
  {
    "type": "CREATE",
    "name": "optom_business_hours",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "optom_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "day_of_week",
        "columnType": "TINYINT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "time_open",
        "columnType": "TIME",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "time_closed",
        "columnType": "TIME",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "optom_id",
        "foreignTable": "optoms",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "fsm_transitions",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "task_id",
        "columnType": "INT",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "to_state",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "from_state",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP(6)",
        "attrs": [
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "task_id",
        "foreignTable": "tasks",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "rx_verification_optom_id",
        "columnType": "INT",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_exams_rx_verification_optom_id",
        "localColumn": "rx_verification_optom_id",
        "foreignTable": "optoms",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "referree_reward_rule_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "referrer_reward_rule_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "is_redeemed",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": 0
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "UNIQUE",
        "columns": [
          "referree_user_id",
          "referrer_reward_rule_id"
        ],
        "name": "unique_referree_user_id_referrer_reward_rule_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_referree_reward_rule_id",
        "localColumn": "referree_reward_rule_id",
        "foreignTable": "reward_rules",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_referrer_reward_rule_id",
        "localColumn": "referrer_reward_rule_id",
        "foreignTable": "reward_rules",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "refer_a_friend_ibfk_1"
      },
      {
        "type": "DROP FOREIGN KEY",
        "name": "refer_a_friend_ibfk_2"
      },
      {
        "type": "CHANGE",
        "before": "referree_user_id",
        "after": "referree_user_id",
        "columnType": "INT(11)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "CHANGE",
        "before": "referrer_user_id",
        "after": "referrer_user_id",
        "columnType": "INT(11)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_referree_user_id",
        "localColumn": "referree_user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_referrer_user_id",
        "localColumn": "referrer_user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "user"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "time_open",
        "after": "time_open",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "time_closed",
        "after": "time_closed",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "RENAME TABLE",
    "existingName": "fsm_transitions",
    "newName": "rx_verification_transitions"
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "date_created",
        "after": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "optom_id",
        "columnType": "INT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "optom_receptionist_name",
        "columnType": "VARCHAR(128)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "rx_invalid_reason",
        "columnType": "TEXT",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_exams_optom_id",
        "localColumn": "optom_id",
        "foreignTable": "optoms",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "email",
        "columnType": "VARCHAR(254)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "fax",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FULLTEXT",
        "name": "fulltext_search",
        "columns": [
          "clinic_name",
          "doctor_name"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "timezone",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "date_completed",
        "columnType": "DATETIME",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "iterable_batch_logs",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "batch_end",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_v2_left_product",
        "localColumn": "v2_left_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_v2_right_product",
        "localColumn": "v2_right_product_id",
        "foreignTable": "productsv2",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "CREATEINDEX",
    "name": "user_logs_date_created_idx",
    "tableName": "user_logs",
    "columns": [
      "date_created"
    ],
    "unique": null
  },
  {
    "type": "CREATEINDEX",
    "name": "iterable_batch_logs_batch_end_idx",
    "tableName": "iterable_batch_logs",
    "columns": [
      "batch_end"
    ],
    "unique": null
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "task_id",
        "columnType": "INT",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FOREIGN KEY",
        "name": "fk_notes_to_task_id",
        "localColumn": "task_id",
        "foreignTable": "tasks",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP FOREIGN KEY",
        "name": "fk_note"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "note_id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "label",
        "columnType": "VARCHAR(256)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP KEY",
        "name": "fulltext_search"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "FULLTEXT",
        "name": "fulltext_search",
        "columns": [
          "clinic_name",
          "doctor_name",
          "city"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "partners",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": ""
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "uuid"
        ]
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "partner_users",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "partner_uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(254)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "password_hash",
        "columnType": "VARCHAR(60)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id"
        ]
      },
      {
        "type": "INDEX",
        "name": "partner_uuid",
        "columns": [
          "partner_uuid"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "partner_users_ibfk_1",
        "localColumn": "partner_uuid",
        "foreignTable": "partners",
        "foreignColumn": "uuid"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "partner_secrets",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "partner_uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "env",
        "columnType": "VARCHAR(4)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "test"
          },
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"t\",\"e\",\"s\",\"t\",\" \",\"/\",\" \",\"l\",\"i\",\"v\",\"e\"]",
              "value": "test / live"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "secret",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": ""
          },
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"R\",\"a\",\"n\",\"d\",\"o\",\"m\",\" \",\"v\",\"a\",\"l\",\"u\",\"e\"]",
              "value": "Random value"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_revoked",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0"
          },
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"S\",\"e\",\"t\",\" \",\"t\",\"o\",\" \",\"1\",\" \",\"t\",\"o\",\" \",\"e\",\"f\",\"f\",\"e\",\"c\",\"t\",\"i\",\"v\",\"e\",\"l\",\"y\",\" \",\"r\",\"e\",\"v\",\"o\",\"k\",\"e\",\" \",\"t\",\"h\",\"e\",\" \",\"s\",\"e\",\"c\",\"r\",\"e\",\"t\",\" \",\"a\",\"n\",\"d\",\" \",\"a\",\"l\",\"l\",\" \",\"a\",\"s\",\"s\",\"o\",\"c\",\"i\",\"a\",\"t\",\"e\",\"d\",\" \",\"t\",\"o\",\"k\",\"e\",\"n\",\"s\"]",
              "value": "Set to 1 to effectively revoke the secret and all associated tokens"
            }
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id"
        ]
      },
      {
        "type": "INDEX",
        "name": "partner_uuid",
        "columns": [
          "partner_uuid"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "partner_secrets_ibfk_1",
        "localColumn": "partner_uuid",
        "foreignTable": "partners",
        "foreignColumn": "uuid"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "partner_tokens",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "issued_by",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"T\",\"h\",\"e\",\" \",\"s\",\"e\",\"c\",\"r\",\"e\",\"t\",\" \",\"t\",\"h\",\"a\",\"t\",\" \",\"g\",\"e\",\"n\",\"e\",\"r\",\"a\",\"t\",\"e\",\"d\",\" \",\"t\",\"h\",\"i\",\"s\",\" \",\"t\",\"o\",\"k\",\"e\",\"n\"]",
              "value": "The secret that generated this token"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "issued_at",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "jwt_token",
        "columnType": "VARCHAR(512)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": ""
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id"
        ]
      },
      {
        "type": "INDEX",
        "name": "issued_by",
        "columns": [
          "issued_by"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "partner_tokens_ibfk_2",
        "localColumn": "issued_by",
        "foreignTable": "partner_secrets",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "jwt_token",
        "after": "jwt_token",
        "columnType": "VARCHAR(512)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "name",
        "after": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "secret",
        "after": "secret",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"R\",\"a\",\"n\",\"d\",\"o\",\"m\",\" \",\"v\",\"a\",\"l\",\"u\",\"e\"]",
              "value": "Random value"
            }
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "transition",
        "columnType": "VARCHAR(250)",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "env"
      }
    ]
  },
  {
    "type": "DROP TABLE",
    "tableName": "partner_tokens",
    "ifExists": false
  },
  {
    "type": "CREATE",
    "name": "timezones",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "city",
        "columnType": "VARCHAR(128)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "state",
        "columnType": "VARCHAR(2)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "postal_code",
        "columnType": "VARCHAR(9)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "latitude",
        "columnType": "DECIMAL(10, 8)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "longitude",
        "columnType": "DECIMAL(11, 8)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "area_code",
        "columnType": "VARCHAR(3)",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "timezone",
        "columnType": "VARCHAR(30)",
        "attrs": []
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "price_overlays",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(256)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "prices",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "price",
        "columnType": "DECIMAL(5, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "min_quantity_threshold",
        "columnType": "TINYINT",
        "attrs": [
          "UNSIGNED",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "lens_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_overlay_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_lens_id",
        "localColumn": "lens_id",
        "foreignTable": "lenses",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_price_overlay_id",
        "localColumn": "price_overlay_id",
        "foreignTable": "price_overlays",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "users_price_overlays",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_expiration",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "price_overlay_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_user_id",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fk_price_overlay_id",
        "localColumn": "price_overlay_id",
        "foreignTable": "price_overlays",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": [
      {
        "key": "ENGINE",
        "value": "InnoDB"
      },
      "DEFAULT",
      {
        "key": "CHARSET",
        "value": "utf8"
      },
      {
        "key": "COLLATE",
        "value": "utf8_general_ci"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "partner_identities",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "partner_uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "external_id",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"T\",\"h\",\"e\",\" \",\"I\",\"D\",\" \",\"o\",\"f\",\" \",\"t\",\"h\",\"e\",\" \",\"u\",\"s\",\"e\",\"r\",\" \",\"i\",\"n\",\" \",\"t\",\"h\",\"e\",\" \",\"p\",\"a\",\"r\",\"t\",\"n\",\"e\",\"r\",\"s\",\" \",\"D\",\"B\"]",
              "value": "The ID of the user in the partners DB"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "telephone",
        "columnType": "VARCHAR(16)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "uuid"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "partner_identities_ibfk_1",
        "localColumn": "partner_uuid",
        "foreignTable": "partners",
        "foreignColumn": "uuid"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "is_custom",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": "0"
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "has_signed_high_myope_waiver",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "qualify_last_exam_range_start_date",
        "columnType": "DATE",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "ADD",
        "column": "qualify_last_exam_range_end_date",
        "columnType": "DATE",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "options"
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "promo_rewards",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "expires_at",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "promo_code",
        "columnType": "VARCHAR(64)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "label",
        "columnType": "VARCHAR(64)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "value",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "max_uses",
        "columnType": "INT(1)",
        "attrs": [
          {
            "DEFAULT": 1
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_stackable",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "can_combine",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "for_new_users",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "held_promo_rewards",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "promo_reward_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "applied_to_order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "expires_at",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "value",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_stackable",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "can_combine",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "for_new_users",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "promo_reward_id_ibfk",
        "localColumn": "promo_reward_id",
        "foreignTable": "promo_rewards",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "user_held_promo_reward_ibfk",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "applied_to_order_id_ibfk_1",
        "localColumn": "applied_to_order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "CREATE",
    "name": "held_px_rewards",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "user_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "applied_to_order_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "given_by_admin_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "value",
        "columnType": "DECIMAL(13, 2)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "type",
        "columnType": "VARCHAR(32)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "reason",
        "columnType": "VARCHAR(128)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "locked_to_order",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "is_deleted",
        "columnType": "TINYINT(1)",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "user_held_px_reward_ibfk",
        "localColumn": "user_id",
        "foreignTable": "users",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "given_by_admin_id_ibfk",
        "localColumn": "given_by_admin_id",
        "foreignTable": "admins",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "applied_to_order_id_ibfk_2",
        "localColumn": "applied_to_order_id",
        "foreignTable": "orders",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "RENAME TABLE",
    "existingName": "rx_verification_transitions",
    "newName": "task_transitions"
  },
  {
    "type": "CREATE",
    "name": "faxes",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          "PRIMARY KEY",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "optom_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "task_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "from",
        "columnType": "VARCHAR(12)",
        "attrs": [
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"i\",\"n\",\" \",\"f\",\"o\",\"r\",\"m\",\"a\",\"t\",\" \",\"1\",\"2\",\"3\",\"-\",\"1\",\"2\",\"3\",\"-\",\"1\",\"2\",\"3\",\"4\",\",\",\" \",\"t\",\"h\",\"i\",\"s\",\" \",\"\\\"\",\"c\",\"o\",\"u\",\"l\",\"d\",\"\\\"\",\" \",\"b\",\"e\",\" \",\"m\",\"i\",\"s\",\"s\",\"i\",\"n\",\"g\",\" \",\"f\",\"r\",\"o\",\"m\",\" \",\"i\",\"n\",\"c\",\"o\",\"m\",\"i\",\"n\",\"g\",\" \",\"f\",\"a\",\"x\",\"e\",\"s\",\".\"]",
              "value": "in format 123-123-1234, this \"could\" be missing from incoming faxes."
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "to",
        "columnType": "VARCHAR(12)",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"i\",\"n\",\" \",\"f\",\"o\",\"r\",\"m\",\"a\",\"t\",\" \",\"1\",\"2\",\"3\",\"-\",\"1\",\"2\",\"3\",\"-\",\"1\",\"2\",\"3\",\"4\"]",
              "value": "in format 123-123-1234"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "s3_key",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"s\",\"3\",\" \",\"b\",\"u\",\"c\",\"k\",\"e\",\"t\",\" \",\"k\",\"e\",\"y\",\" \",\"t\",\"o\",\" \",\"f\",\"i\",\"l\",\"e\",\".\"]",
              "value": "s3 bucket key to file."
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "direction",
        "columnType": "ENUM(INBOUND, OUTBOUND)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "status",
        "columnType": "VARCHAR(10)",
        "attrs": [
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"f\",\"a\",\"x\",\"a\",\"g\",\"e\",\" \",\"a\",\"p\",\"i\",\",\",\" \",\"o\",\"n\",\"l\",\"y\",\" \",\"a\",\"p\",\"p\",\"l\",\"i\",\"c\",\"a\",\"b\",\"l\",\"e\",\" \",\"f\",\"o\",\"r\",\" \",\"o\",\"u\",\"t\",\"g\",\"o\",\"i\",\"n\",\"g\",\".\"]",
              "value": "faxage api, only applicable for outgoing."
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "longstatus",
        "columnType": "TEXT",
        "attrs": []
      },
      {
        "type": "COLUMN",
        "name": "faxage_id",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"I\",\"n\",\" \",\"f\",\"a\",\"x\",\"a\",\"g\",\"e\",\" \",\".\",\".\",\".\",\" \",\"o\",\"u\",\"t\",\"g\",\"o\",\"i\",\"n\",\"g\",\" \",\"f\",\"a\",\"x\",\"e\",\"s\",\" \",\"t\",\"h\",\"i\",\"s\",\" \",\"a\",\" \",\"\\\"\",\"j\",\"o\",\"b\",\"i\",\"d\",\"\\\"\",\",\",\" \",\"b\",\"u\",\"t\",\" \",\"f\",\"o\",\"r\",\" \",\"i\",\"n\",\"c\",\"o\",\"m\",\"i\",\"n\",\"g\",\" \",\"i\",\"t\",\"s\",\" \",\"c\",\"a\",\"l\",\"l\",\"e\",\"d\",\" \",\"a\",\" \",\"\\\"\",\"r\",\"e\",\"c\",\"e\",\"i\",\"v\",\"e\",\"i\",\"d\",\"\\\"\"]",
              "value": "In faxage ... outgoing faxes this a \"jobid\", but for incoming its called a \"receiveid\""
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "retries",
        "columnType": "INT",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": 0
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_sent",
        "columnType": "DATETIME",
        "attrs": [
          "NOT NULL",
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"f\",\"r\",\"o\",\"m\",\" \",\"f\",\"a\",\"x\",\"a\",\"g\",\"e\",\" \",\"a\",\"p\",\"i\"]",
              "value": "from faxage api"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_complete",
        "columnType": "DATETIME",
        "attrs": [
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"f\",\"r\",\"o\",\"m\",\" \",\"f\",\"a\",\"x\",\"a\",\"g\",\"e\",\" \",\"a\",\"p\",\"i\",\" \",\".\",\".\",\" \",\"o\",\"n\",\"l\",\"y\",\" \",\"u\",\"s\",\"e\",\"d\",\" \",\"o\",\"n\",\" \",\"o\",\"u\",\"t\",\"g\",\"o\",\"i\",\"n\",\"g\",\" \",\"f\",\"a\",\"x\",\"e\",\"s\",\".\"]",
              "value": "from faxage api .. only used on outgoing faxes."
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "INDEX",
        "name": "faxes_status",
        "columns": [
          "status"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "faxes_task_fk",
        "localColumn": "task_id",
        "foreignTable": "tasks",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "faxes_optom_fk",
        "localColumn": "optom_id",
        "foreignTable": "optoms",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "affiliate_id",
        "columnType": "VARCHAR(8)",
        "attrs": [
          {
            "DEFAULT": null
          },
          {
            "UNIQUE": true
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "fax_verification_response_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "ADD",
        "column": "fax_verification_request_id",
        "columnType": "INT",
        "attrs": []
      },
      {
        "type": "FOREIGN KEY",
        "name": "fax_verification_response_fk",
        "localColumn": "fax_verification_response_id",
        "foreignTable": "faxes",
        "foreignColumn": "id"
      },
      {
        "type": "FOREIGN KEY",
        "name": "fax_verification_request_fk",
        "localColumn": "fax_verification_request_id",
        "foreignTable": "faxes",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "incoming_fax_numbers",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "unsatisfied_state_requirements",
        "columnType": "JSON",
        "attrs": []
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "rx_requests",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "id",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL",
          "AUTO_INCREMENT"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "token",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "identity_uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "partner_uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "target_skus",
        "columnType": "JSON",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "id"
        ]
      },
      {
        "type": "INDEX",
        "name": "identity_uuid",
        "columns": [
          "identity_uuid"
        ]
      },
      {
        "type": "INDEX",
        "name": "partner_uuid",
        "columns": [
          "partner_uuid"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "rx_requests_ibfk_1",
        "localColumn": "identity_uuid",
        "foreignTable": "partner_identities",
        "foreignColumn": "uuid"
      },
      {
        "type": "FOREIGN KEY",
        "name": "rx_requests_ibfk_2",
        "localColumn": "partner_uuid",
        "foreignTable": "partners",
        "foreignColumn": "uuid"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "parent_task_id",
        "columnType": "INT(11)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": null,
        "localColumn": "parent_task_id",
        "foreignTable": "tasks",
        "foreignColumn": "id"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "theme",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          },
          {
            "AFTER": "name"
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "theme",
        "after": "theme",
        "columnType": "VARCHAR(16)",
        "attrs": [
          "NOT NULL"
        ]
      }
    ]
  },
  {
    "type": "CREATE",
    "name": "rx_patients",
    "definitions": [
      {
        "type": "COLUMN",
        "name": "uuid",
        "columnType": "VARCHAR(36)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_created",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_modified",
        "columnType": "TIMESTAMP",
        "attrs": [
          "NOT NULL",
          {
            "DEFAULT": {
              "type": "CURRENT_TIMESTAMP"
            }
          },
          {
            "ONUPDATE": {
              "type": "CURRENT_TIMESTAMP"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "rx_request_id",
        "columnType": "INT(11)",
        "attrs": [
          "unsigned",
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "name",
        "columnType": "VARCHAR(255)",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "email",
        "columnType": "VARCHAR(255)",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "date_of_birth",
        "columnType": "VARCHAR(10)",
        "attrs": [
          {
            "DEFAULT": null
          },
          {
            "COMMENT": {
              "type": "string",
              "rawValue": "[\"Y\",\"Y\",\"Y\",\"Y\",\"-\",\"M\",\"M\",\"-\",\"D\",\"D\"]",
              "value": "YYYY-MM-DD"
            }
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "scratchpad",
        "columnType": "JSON",
        "attrs": [
          "NOT NULL"
        ]
      },
      {
        "type": "COLUMN",
        "name": "left_rx",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "COLUMN",
        "name": "right_rx",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      },
      {
        "type": "PRIMARY KEY",
        "columns": [
          "uuid"
        ]
      },
      {
        "type": "INDEX",
        "name": "rx_request_id",
        "columns": [
          "rx_request_id"
        ]
      },
      {
        "type": "FOREIGN KEY",
        "name": "rx_patients_ibfk_1",
        "localColumn": "rx_request_id",
        "foreignTable": "rx_requests",
        "foreignColumn": "id"
      }
    ],
    "tableOptions": []
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "scratchpad",
        "after": "scratchpad",
        "columnType": "JSON",
        "attrs": [
          {
            "DEFAULT": null
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "affiliate_id",
        "columnType": "VARCHAR(8)",
        "attrs": [
          {
            "DEFAULT": null
          },
          {
            "UNIQUE": true
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "CHANGE",
        "before": "affiliate_id",
        "after": "affiliate_id",
        "columnType": "VARCHAR(8)",
        "attrs": [
          "NOT NULL",
          {
            "UNIQUE": true
          }
        ]
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "DROP",
        "column": "date_of_birth"
      }
    ]
  },
  {
    "type": "ALTER",
    "changes": [
      {
        "type": "ADD",
        "column": "fulfillment",
        "columnType": "JSON",
        "attrs": [
          "NULL",
          {
            "DEFAULT": null
          },
          {
            "AFTER": "scratchpad"
          }
        ]
      }
    ]
  }
]
